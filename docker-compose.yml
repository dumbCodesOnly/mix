version: '3.8'\n\nservices:\n  backend:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    container_name: ai-platform-backend\n    ports:\n      - \"8000:8000\"\n    environment:\n      - HF_API_KEY=${HF_API_KEY}\n      - HOST=0.0.0.0\n      - PORT=8000\n      - DEBUG=false\n      - ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8081,http://localhost:19000\n      - LOG_LEVEL=INFO\n      - LOG_FORMAT=json\n      - REQUEST_TIMEOUT=300\n      - MAX_RETRIES=3\n      - RETRY_BACKOFF_MULTIPLIER=2.0\n      - INITIAL_RETRY_DELAY=1.0\n      - MAX_RETRY_DELAY=30.0\n      - MAX_IMAGE_SIZE=10485760\n      - IMAGE_RESIZE_THRESHOLD=1024\n      - IMAGE_QUALITY=85\n      - MAX_AUDIO_SIZE=52428800\n    volumes:\n      - ./app:/app/app\n      - huggingface_cache:/root/.cache/huggingface\n    restart: unless-stopped\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:8000/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 40s\n\nvolumes:\n  huggingface_cache:\n    driver: local\n
